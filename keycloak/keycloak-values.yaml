image:
  repository: bitnamilegacy/keycloak

auth:
  adminPassword: nIskQiijss

production: true
proxyHeaders: xforwarded

replicaCount: 2
podLabels:
  istio.io/dataplane-mode: ambient
podAntiAffinityPreset: hard
nodeSelector:
  karpenter.sh/nodepool: system
tolerations:
- key: node-role.kubernetes.io/system
  operator: Exists
  effect: NoSchedule
priorityClassName: platform-critical

networkPolicy:
  extraIngress:
    - ports:
      - port: 15008

autoscaling:
  vpa:
    enabled: true
    controlledResources: ["cpu"]
    minAllowed:
      cpu: 10m
    maxAllowed:
      cpu: 3
    updatePolicy:
      updateMode: InPlaceOrRecreate

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
  prometheusRule:
    enabled: false

resources:
  requests:
    cpu: 68m
    memory: 1250Mi
  limits:
    memory: 1250Mi

postgresql:
  enabled: false

externalDatabase:
  host: keycloak-cnpg-cluster-v2-rw
  port: 5432
  database: keycloak
  existingSecret: keycloak-cnpg-cluster-v2-app
  existingSecretUserKey: user
  existingSecretPasswordKey: password